function Sprite(e){var t=new app.E("div");t.e.style.fontWeight="bold",t.e.style.color="#ffffff",t.e.style.textShadow="1px 1px 5px rgba(0,0,0,0.5)",t.sC("pointer"),t.bounds={width:0,height:0},e.add(t),this.x=0,this.y=0,this.startAngle=0,this.endAngle=0,this.radius=0,this.color="#ffffff",this.sum=0,this.percent=0,this.text=t,this.target={x:0,y:0,startAngle:0,endAngle:0,radius:0}}app.HLines=function(d,u){var p,c,h,v=[],g={},m={},s="#ffffff",o="#ffffff",w=new app.E("div");w.sY(250);var e=new app.E("div");function y(){var e=new app.E("div");e.sW(400),e.sH(2),e.texts=[],w.add(e);for(var t,n=0;n<d.length;n++)t=new app.E("div"),1===n&&(t.e.style.right="0px"),d[n]&&(t.e.style.color=d[n]),t.sY(-16),e.add(t),e.texts.push(t);return i(e,s,o),e}function x(e,t){e.sC("tween"),e.sB(t)}function C(e){e.rC("tween"),v.push(e)}function t(e){for(var t in h=1,c=0,g)v.push(g[t]),g[t].sO(0);g={}}function i(e,t,n){e.e.style.backgroundColor=t,e.e.style.color=n}return e.sW(400),e.sH(3),e.sY(-1),w.add(e),{setMode:function(e,t){for(var n in s=e?"rgba(255,255,255,0.1)":"rgba(24,45,59,0.1)",o=t.axisText.y||t.axisText,v.forEach(function(e){i(e,s,o)}),m)i(m[n],s,o);for(var n in g)i(g[n],s,o)},addTo:function(e){e.add(w)},setOver:function(e){t()},setDat:function(e){t()},show:function(){w.sO(1)},hide:function(){w.sO(0)},render:function(e,t,n,s,o,i){var r,a,l;for(m=g,g={},r=0,l=s;r<6;l+=i,r++){for((p=m[l])?p.sB((l-s)*o):((p=v.pop())||(p=y(),w.add(p)),p.index=l,p.sO(1),p.sB((l-c)*h),setTimeout(x,20,p,(l-s)*o)),a=0;a<d.length;a++)p.texts[a].sT(app.format(e[a]+n[a]*r));if(1<d.length)for(a=0;a<d.length;a++)p.texts[a].sO(u.views[a].isActive?1:0);g[p.index]=p}for(var f in m)p=m[f],g[p.index]||(p.sB((p.index-s)*o),p.sO(0),setTimeout(C,500,p));c=s,h=o}}},app.Header=function(e,t,n){var s,o,i,r,a,l,f=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d=v,u=26784e5,p=[];(s=new app.E("div")).sT(t),s.sC("tween"),s.sC("title"),s.sY(20),e.add(s),(i=new app.E("div")).inputEnabled=!1,i.e.style.position="relative",i.sC("tween"),i.sC("pointer"),i.sY(20),i.sS(1,0),e.add(i),i.onDown(function(){i.inputEnabled&&(app.showTap(),n())}),(l=document.createElement("img")).src="img/zoom-out.png",app.E.addClass(l,"zoom-icon"),i.e.appendChild(l),(o=new app.E("div")).sC("zoom"),o.sT("Zoom Out"),i.add(o);var c=new app.E("div");c.sY(6),c.e.style.right="0px",e.add(c);for(var h=0;h<9;h++)(a=new app.E("div")).sY(20),a.sC("range-text"),a.sC("tw"),a.sS(1,0),c.add(a),p.push(a);function v(e,t){var n=new Date(e),s=new Date(t),o=["","",n.getUTCDate()+"&nbsp;",app.months[n.getUTCMonth()]+"&nbsp;",String(n.getUTCFullYear())];return 1<s.getUTCMonth()-n.getUTCMonth()||s.getTime()-n.getTime()>u?o.push("&nbsp;-&nbsp;",s.getUTCDate()+"&nbsp;",app.months[s.getUTCMonth()]+"&nbsp;",String(s.getUTCFullYear())):o.unshift("","","",""),o}function g(e,t){var n=new Date(e),s=new Date(t),o=[f[n.getUTCDay()]+",&nbsp;",n.getUTCDate()+"&nbsp;",app.months[n.getUTCMonth()]+"&nbsp;",String(n.getUTCFullYear())];return 1<s.getUTCDate()-n.getUTCDate()||864e5<s.getTime()-n.getTime()?o.push("&nbsp;-&nbsp;",f[s.getUTCDay()]+",&nbsp;",s.getUTCDate()+"&nbsp;",app.months[s.getUTCMonth()]+"&nbsp;",String(s.getUTCFullYear())):o.unshift("","","","",""),o}function m(e,t){e.sS(1,1),e.e.innerHTML=t}return{setOver:function(e){r=e,i.inputEnabled=!1,s.sS(1,1),i.sS(1,0),d=v},setDat:function(e){r=e,i.inputEnabled=!0,s.sS(1,0),i.sS(1,1),d=g},setMode:function(e){var t=e?"#ffffff":"#000000";o.e.style.color=e?"#48AAF0":"#108BE3",s.e.style.color=t,p.forEach(function(e){e.e.style.color=t})},setRange:function(e,t){for(var n=d(r.columns[0][e+1],r.columns[0][t+1]).reverse(),s=0;s<n.length;s++)n[s]!==p[s].e.innerHTML&&(p[s].sS(1,0),setTimeout(m,80,p[s],n[s]))}}},app.Info=function(w,y,x,C,b,e,T,t){var n,s,o,M,E,A,D,i,S,O,I,r,Y=0,a=!1,X=[],H=[],L=[],U=[],W=[],k=v,N="#000000",P="#ffffff",F=!1,l=["Mon","Tue","Wed","Thu","Fri","Sut","Sun"],f=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for((o=new app.E("div")).sC("tween"),o.sW(y.view.w),o.sH(y.view.h),o.sO(0),o.sY(0),y.view.add(o),(O=new app.E("div")).sW(0),O.sH(y.view.h),O.sC("info-overlay"),y.overlayLayer.add(O),(I=new app.E("div")).sW(0),I.sH(y.view.h),I.e.style.right="0px",I.sC("info-overlay"),y.overlayLayer.add(I),(M=new app.E("div")).sW(2),M.sY(0),M.sH(y.view.h),M.sC("info-line"),o.add(M),(E=new app.E("div")).sC("info-bg"),E.sW(140),E.sH(60),E.onDown(function(e){if(!a)return;e.stopPropagation(),app.showTap(),t(x.leftIndex+Y)}),o.add(E),(r=new app.E("div")).sX(6),r.sY(4),E.add(r),s=0;s<5;s++){var d=new app.E("div");d.sC("info-main-text"),d.sC("tw"),r.add(d),U[s]=d}for(i=document.createElement("i"),app.E.addClass(i,"arrow-right"),i.style.right="7px",i.style.top="7px",i.style.position="absolute",E.e.appendChild(i),n=0;n<=e;n++){var u=new app.E("div");E.add(u),u.sC("info-name"),u.sX(T?40:10),X.push(u);var p=new app.E("div");if(p.sC("info-val"),p.e.style.right="8px",E.add(p),H.push(p),T){var c=new app.E("div");c.e.style.right="108px",c.e.style.fontWeight="bold",E.add(c),W.push(c)}}for(y.view.onDown(function(){F||(o.sO(1),y.overlayLayer.sO(1),a=!0,E.e.style.cursor="pointer",m())}),n=0;n<e;n++){var h=new app.E("div");h.sW(8),h.sH(8),h.sX(-6),h.e.style.border="2px solid",h.e.style.borderRadius="6px",L.push(h),M.add(h)}function v(e){return[l[e.getUTCDay()],",&nbsp;",f[e.getUTCMonth()]+"&nbsp;",e.getUTCDate()+"&nbsp;",String(e.getUTCFullYear())]}function g(e){var t=e.getUTCHours(),n=e.getUTCMinutes();return[t<10?"0":"",String(t),":",n<10?"0":"",String(n)]}function R(e,t){e.sS(1,1),e.e.innerHTML=t}function m(){if(!F){var e,t,n,s,o,i,r,a,l,f,d,u,p,c,h=w.getInputY()-y.view.y,v=w.getInputX()-y.view.x;if(e=x.rightIndex-x.leftIndex,t=y.view.w/e,!(h<0||h>y.view.h||v<0||v>y.view.w+t)){if(v=(Y=Math.min(x.rightIndex-(S&&!T?1:0),Math.floor(v/t)))*t,E.e.style.top=Math.max(-10,Math.min(y.view.h-E.h-10,h-E.h-60))+"px",v<E.w+20?E.sX(v+t+20):E.sX(v-E.w-20),S)O.sW(Math.min(y.view.w-Math.max(3,t),v)),I.sW(Math.max(0,y.view.w-v-Math.max(3,t))),y.overlayLayer.sO(1),M.sX(100500);else for(y.overlayLayer.sO(0),M.sX(v),n=0;n<C.views.length;n++){var g=L[n];C.views[n].isActive?(g.e.style.backgroundColor=P,g.e.style.borderColor=C.views[n].tooltipColor,g.sY(y.view.h-y.getY(n,x.leftIndex+Y)+g.x),g.sO(1)):g.sO(0)}for(i=n=0,r=X.length,a=0;n<r;n++){if(f=H[n],d=X[n],u=W[n],n===C.views.length&&1<i&&!b&&!T)l=app.format(a),p="All",c=N,f.sC("bold");else{if(!C.views[n]||!C.views[n].isActive){u&&u.sS(1,0),d.sS(1,0),f.sS(1,0),d.sT(""),f.sT("");continue}a+=D[n][x.leftIndex+Y+1],l=app.format(D[n][x.leftIndex+Y+1]),p=C.views[n].name,c=C.views[n].tooltipColor,f.rC("bold")}o=26+20*i,d.sY(o),f.sY(o),d.sS(1,1),f.sS(1,1),d.sT(p),d.e.style.color=N,f.e.style.color=c||N,f.sT(l),u&&(u.sS(1,1),u.sT(y.getPercent(n,x.leftIndex+Y).toFixed(0)+"%"),u&&u.sS(1,1),u.sY(o),u.e.style.color=N),i++}E.sH(30+20*i);var m=k(new Date(A[x.leftIndex+Y+1]));for(s=0;s<m.length;s++)U[s].e.style.color=N,m[s]!==U[s].e.innerHTML&&(U[s].sS(1,0),U[s].e.innerHTML=m[s],setTimeout(R,80,U[s],m[s]))}}}function B(e){A=e.columns[0],D=e.columns.slice(1),setTimeout(m,1)}return app.i.downHandlers.push(function(){if(!F){var e=w.getInputY()-y.view.y;(e<0||e>y.view.h)&&(o.sO(0),y.overlayLayer.sO(0),a=!1,E.e.style.cursor="default")}}),app.i.moveHandlers.push(function(e){e.isDown&&m()}),{setOver:function(e){B(e),S="bar"===e.types.y0,i.style.visibility="visible",k=v},setDat:function(e){B(e),S="bar"===e.types.y0&&!b,i.style.visibility="hidden",k=g},setMode:function(e,t){var n=e?"rgba(36,47,62,0.5)":"rgba(255,255,255,0.5)";O.e.style.backgroundColor=n,I.e.style.backgroundColor=n,E.e.style.backgroundColor=e?"#1C2533":"#ffffff",i.style.borderColor="#D2D5D7",N=e?"#ffffff":"#000000",P=t,M.e.style.backgroundColor=e?"rgba(255,255,255,0.1)":"rgba(24,45,59,0.1)"},render:m,show:function(){F=!1},hide:function(){F=!0,o.sO(0),y.overlayLayer.sO(0)}}},app.Buttons=function(e,n,s,a){var l,f,d="#ffffff";(f=new app.E("div")).sY(435),e.add(f);var t=[];function u(e){e.rC("shake")}function p(e){var t,n,s,o;for(e.isDown=!1,t=0,s=l.length;t<s;t++)(o=l[t]).isActive=o===e,n=o.isActive?1:0,o.tick.sS(n,n),o.e.style.backgroundColor=o.isActive?o.color:d,o.text.e.style.color=o.isActive?"#ffffff":o.color;app.showTap(),a(l)}return s.columns.slice(1).forEach(function(e){t.push(s.names[e[0]])}),l=t.map(function(e,t){var n,s,o,i,r;return(n=new app.E("div")).name=e,n.sC("button"),f.add(n),(s=new app.E("img")).e.src="img/tick.png",s.sC("tween"),s.sC("tick"),n.add(s),(o=new app.E("span")).sC("button-text"),o.sT(e),n.add(o),n.isActive=!0,n.tick=s,n.text=o,n.onDown(function(){n.isDown=!0,r=Date.now(),i=setTimeout(p,200,n)}),app.i.upHandlers.push(function(){if(n.isDown&&!(200<Date.now()-r))if(n.isDown=!1,clearTimeout(i),1===function(){for(var e=0,t=0;t<l.length;t++)e+=l[t].isActive?1:0;return e}()&&n.isActive)!function(e){e.sC("shake"),setTimeout(u,300,e)}(n);else{n.isActive=!n.isActive,n.e.style.backgroundColor=n.isActive?n.color:d,o.e.style.color=n.isActive?"#ffffff":n.color;var e=n.isActive?1:0;s.sS(e,e),app.showTap(),a(l)}}),n}),{setOver:function(e){n?(this.views=[{isActive:!0,name:e.names.y0}],f.sO(0)):this.views=l},setDat:function(e){if(f.sO(1),this.views=l,n)for(var t=0;t<l.length;t++)l[t].name=e.names[e.columns[t+1][0]],l[t].text.sT(l[t].name)},setMode:function(e,n,t){d=t,l.forEach(function(e,t){e.color=n.buttons[s.columns[t+1][0]],e.tooltipColor=n.tooltip[s.columns[t+1][0]],e.e.style.borderColor=e.color,e.e.style.backgroundColor=e.isActive?e.color:d})},views:null}},app.AxisX=function(d){var u,p,c,h,v=[],g={},m={},w="#ffffff";app.months=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var y=new app.E("div");function x(e,t){e.sC("tween"),e.sX(t)}function C(e){e.rC("tween"),v.push(e)}function t(){for(var e in p=1,u=0,g)v.push(g[e]),g[e].sO(0);g={}}return y.sY(250),d.add(y),{setOver:function(e){t(),c=e.columns[0].slice(1),h=c.map(function(e){var t=new Date(e);return t.getUTCDate()+" "+app.months[t.getUTCMonth()]})},setDat:function(e){t(),c=e.columns[0].slice(1),h=c.map(function(e){var t=new Date(e),n=t.getUTCHours(),s=t.getUTCMinutes();return(n<10?"0":"")+n+":"+(s<10?"0":"")+s})},setMode:function(e,t){for(var n in w=t.axisText.x||t.axisText,v.forEach(function(e){e.e.style.color=w}),m)m[n].e.style.color=w;for(var n in g)g[n].e.style.color=w},show:function(){y.sO(1)},hide:function(){y.sO(0)},render:function(e,t,n){for(var s,o=Math.floor((t-e)/5),i=1;i<o;)i*=1.4;i=Math.floor(i);var r,a=e,l=t;for(m=g,g={};a<=l;a+=i)a<0||((s=m[a])?s.sX((c[a]-c[e])*n):((s=v.pop())||(r=void 0,(r=new app.E("div")).sT(0),r.sW(50),r.sY(6),r.e.style.color=w,d.add(r),s=r,y.add(s)),s.index=a,s.sO(1),s.sT(h[a]),s.sX((c[a]-c[u])*p),setTimeout(x,20,s,(c[a]-c[e])*n)),g[s.index]=s);for(var f in m)s=m[f],g[s.index]||(s.sX((c[s.index]-c[e])*n),s.sO(0),setTimeout(C,500,s));u=e,p=n}}},app.Chart=function(e,s,t){var n,o,i,r,a,l,f,d,u,p,c,h,v=app.E,g=app.i,m=e.overview,w=e.data,y=0,x=3===s,C=Math.min(90,m.columns[0].length-2),b=document.body,T={getInputX:function(){return(g.x-n.x)/n.sc},getInputY:function(){return(g.y+app.getScrollY()-n.y)/n.sc}};n=new v("div"),b.appendChild(n.e),n.sW(400),n.sH(640),n.sC("chart"),a=app.Header(n,t,A),r=app.Buttons(n,x,w[0]||m,function(){l.renderDiagram(),E()}),d=new app.HLines(m.y_scaled?[m.colors.y0,m.colors.y1]:[""],r),(o=app.Diagram(400,250,r,d,!0,x)).view.sX(0),o.view.sY(80),n.add(o.view),m.percentage&&((c=app.DiagramP(400,250,r,T)).view.sX(0),c.view.sY(80),n.add(c.view)),i=app.AxisX(o.view),l=app.ScrollBar(T,r,x,function(){a.setRange(l.leftIndex,l.rightIndex),E()}),n.add(l.view);var M=(w[0]||m).columns.length-1;function E(){o.render(l.leftIndex,l.rightIndex,i),c&&h!==m&&c.moveToCircle(l.leftIndex,l.rightIndex,h)}function A(){h=m,a.setOver(m),r.setOver(m),l.setOver(m),o.setOver(m),i.setOver(m),d.setOver(m),f.setOver(m),c&&p&&(c.moveToSquare(y,C,o,!0),c.hide(),o.show(),f.show(),i.show(),d.show()),l.setRange(y,C),l.renderDiagram(),u=p=!0}return f=app.Info(T,o,l,r,x,M,m.percentage,function(e){if(!u)return;u=!1;var t,n=w[e];n||(n=function(e,t){var n=Math.max(1,Math.min(e.columns[0].length-8,t-2)),s={};for(var o in e)s[o]=e[o];s.columns=e.columns.slice();for(var i=0;i<s.columns.length;i++){var r=s.columns[i].slice(n,n+8);r.unshift(s.columns[i][0]),s.columns[i]=r}return s}(m,l.leftIndex+e));h=n,y=l.leftIndex,C=l.rightIndex,n.percentage&&(o.hide(),f.hide(),i.hide(),d.hide());a.setDat(n),r.setDat(n),l.setDat(n),l.setDat(n),i.setDat(n),d.setDat(n),f.setDat(n),n.percentage?(t=Math.floor((n.columns[0].length-2)/2),l.setRange(t,t+1),c.show(),c.moveToSquare(y,C,o),c.moveToCircle(l.leftIndex,l.rightIndex,n)):(t=24*Math.floor((n.columns[0].length-2)/2/24),o.setDat(n),l.setRange(t,t+24));l.renderDiagram()}),{view:n,onOverMode:A,setMode:function(e,t){var n=app.config[e?"night":"day"][s];o.setMode(e,n),l.setMode(e,n),r.setMode(e,n,t),d.setMode(e,n),i.setMode(e,n),a.setMode(e),f.setMode(e,t),o.bgColor=t,l.diagram.bgColor=t,c&&c.setConfig({bgColor:t,colors:n.lines,isNight:e}),p&&(f.render(),o.render(l.leftIndex,l.rightIndex,i),l.renderDiagram())}}},app.Diagram=function(s,o,f,d,e,t){var u,p,c,n,h,v,a,g,m,w,y,x,C,b,T,M,E,A,D,S,O,I=0,Y=[],X=[],H=-1,i=5,L=Number.MAX_VALUE,l=-Number.MAX_VALUE,U=[],W=[],k=[],N=[],P=[],F=[],R=[],B=[],_=!0,V=!1,r=e?400:0,z=new app.E("div");z.sW(s),z.sH(o);var J=new app.E("div");J.e.style.overflow="hidden",J.sW(s),J.sH(o),z.add(J);var q=new app.E("div");function K(e){Z(e),K=Z;for(var t=0;t<T;t++)x=new app.E("div"),J.add(x),C=document.createElement("canvas"),b=C.getContext("2d",{alpha:1!==T}),C.width=s+2*r,C.height=o,C.style.transform="scale(1, -1)",C.style.height=o+"px",C.style.position="absolute",x.e.appendChild(C),P[t]=C,R[t]=b,F[t]=x;if(!c)for(t=1;t<a;t++)P[t]=P[0],R[t]=R[0],F[t]=F[0]}function Z(e){v=!1,u=(A=e).columns[0].slice(1),e.types,c=e.y_scaled,p=e.columns.slice(1).map(function(e){return e=e.slice(1)}),a=p.length,D=e.percentage?(y=Q,ee):n?(y=G,te):(y=j,ne),T=c?a:1,I=s/(u[u.length-1]-u[0])}function $(){v=!1;for(var e=0;e<T;e++)(C=P[e]).style.width=2*r+s+"px",C.style.height=C.height+"px",C.style.top="0px",C.style.left="0px",app.E.addClass(C,"tween")}return q.sW(z.w),q.sH(z.h),q.sO(0),z.add(q),d&&d.addTo(z),{view:z,bgColor:"#ffffff",overlayLayer:q,setOver:function(e){_=!0,n=e.stacked||t,K(e)},setDat:function(e){_=!1,n=e.stacked,K(e)},setMode:function(e,t){O=t},getY:function(e,t){return(p[e][t]-k[e])*U[e]},getPercent:function(e,t){return p[e][t]*S[t]},render:function(e,t,n){if(!V){var s,o,i,r,a,l=Math.ceil(t-e);if(a=e!==H&&t!==h?r=1:e!==H?(r=2,0):(r=0,2),o=Math.max(0,e-Math.floor(l*r)),i=Math.min(u.length-1,t+Math.floor(l*a)),D(e,t,o,i),R[0].fillStyle=this.bgColor,R[0].fillRect(0,0,C.width,C.height),c&&R[1].clearRect(0,0,C.width,C.height),L!==Number.MAX_VALUE){if(n&&n.render(e,t,w),d&&d.render(k,U,W,L,E,M),!v){for(v=!0,s=0;s<T;s++){C=P[s],x=F[s],C.style.top=(X[s]-N[s])*Y[s]+"px",C.style.height=parseInt(C.style.height)*Y[s]/U[s]+"px",C.style.width=parseInt(C.style.width)*I/w+"px",app.E.removeClass(C,"tween");var f=x.x;x.sX((u[o]-m)*w),C.style.left=f-x.x+(u[o]-u[H])*I+"px",Y[s]=U[s],X[s]=N[s]}setTimeout($,20)}I=w,h=i,m=u[H=o],g=u[i],y(o,i)}}},show:function(){V=!1,z.sO(1)},hide:function(){V=!0,z.sO(0)}};function j(e,t){var n,s,o;for(n=0;n<a;n++)if(f.views[n].isActive){for(o=p[n],(b=R[n]||R[0]).beginPath(),b.moveTo((u[e]-m)*w,(o[e]-k[n])*U[n]),s=e+1;s<=t;s++)b.lineTo((u[s]-m)*w,(o[s]-k[n])*U[n]);b.strokeStyle=O.lines[A.columns[n+1][0]],b.stroke()}}function G(e,t){var n,s,o,i,r,a;for(r=(u[t]-m)*w/(t-e),n=p.length-1;0<=n;n--)if(f.views[n].isActive){for(a=p[n],o=(u[e]-m)*w,b.beginPath(),b.moveTo(o,0),s=e;s<=t;s++,o+=r)i=(B[s]-L)*E,B[s]-=a[s],b.lineTo(o,i),b.lineTo(o+r,i);b.lineTo(o,0),b.closePath(),b.fillStyle=O.lines[A.columns[n+1][0]],b.fill()}}function Q(e,t){var n,s,o,i,r,a,l=[];for(r=(u[t]-m)*w/(t-e),s=e;s<=t;s++)l[s]=100;for(n=p.length-1;0<=n;n--)if(f.views[n].isActive){if(a=p[n],o=(u[e]-m)*w,b.beginPath(),b.moveTo(o,0),_)for(b.lineTo(o,l[e]*E),s=e;s<=t;s++,o+=r)i=l[s]*E,l[s]-=a[s]*S[s],b.lineTo(o,i);else for(s=e;s<=t;s++,o+=r)i=l[s]*E,l[s]-=a[s]*S[s],b.lineTo(o,i),b.lineTo(o+r,i);b.lineTo(o,0),b.closePath(),b.fillStyle=O.lines[A.columns[n+1][0]],b.fill()}}function ee(e,t,n,s){var o,i;for((S=[]).length=0,i=n;i<=s;i++){var r=0;for(o=0;o<a;o++)f.views[o].isActive&&(r+=p[o][i]);S[i]=100/r}L=0,l=100,se(e,t)}function te(e,t,n,s){var o,i;for(B.length=0,l=-Number.MAX_VALUE,i=n;i<=s;i++)B[i]=0;for(o=0;o<a;o++)if(f.views[o].isActive)for(i=n;i<=s;i++)B[i]+=p[o][i];for(i=e;i<=t;i++)l=Math.max(l,B[i]);L=0,se(e,t)}function ne(e,t){var n,s,o;for(L=Number.MAX_VALUE,l=-Number.MAX_VALUE,n=0;n<a;n++)if(f.views[n].isActive){for(o=p[n],k[n]=Number.MAX_VALUE,N[n]=-Number.MAX_VALUE,s=e;s<=t;s++)k[n]=Math.min(k[n],o[s]),N[n]=Math.max(N[n],o[s]);W[n]=Math.max(1,Math.floor((N[n]-k[n])/i)),l=Math.max(N[n],l),L=Math.min(k[n],L)}L=L===l?0:L,se(e,t)}function se(e,t){var n;if(m=u[e],g=u[t],w=s/(g-m),L=app.round(L,"floor"),M=Math.max(1,Math.floor((l-L)/i)),M=app.round(M,"ceil"),E=o/((l=L+M*i)-L),c)for(n=0;n<a;n++)U[n]=E*M/W[n];else for(n=0;n<a;n++)U[n]=E,k[n]=L,N[n]=l,W[n]=M}},Sprite.prototype.update=function(){if(this.x+=.2*(this.target.x-this.x),this.y+=.2*(this.target.y-this.y),this.startAngle+=.2*(this.target.startAngle-this.startAngle),this.endAngle+=.2*(this.target.endAngle-this.endAngle),this.radius+=.2*(this.target.radius-this.radius),0!==this.percent){var e=.5*(this.startAngle+this.endAngle),t=this.radius*(.7-.01*this.percent*.3);this.text.sX(this.x+Math.cos(e)*t-.5*this.text.bounds.width),this.text.sY(this.y+Math.sin(e)*t-.5*this.text.bounds.height)}},Sprite.prototype.render=function(e){e.beginPath(),e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),e.lineTo(this.x,this.y),e.fillStyle=this.color,e.fill()},app.DiagramP=function(a,l,d,r){var s,o,e,u=.5*a,p=.5*l,c=!0,h=[],i={},f=new app.E("div");f.sC("tween"),f.sW(a),f.sH(l),f.e.style.visibility="hidden";var t=new app.E("div");t.e.style.overflow="hidden",t.sW(a),t.sH(l),f.add(t),s=document.createElement("canvas"),o=s.getContext("2d",{alpha:!1}),s.width=a,s.height=l,s.style.height=l+"px",s.style.position="absolute",t.e.appendChild(s);for(var n=0;n<6;n++)(e=new Sprite(f)).x=u,e.y=p,e.radius=115,e.id="y"+n,h.push(e);var v=new app.E("div");v.sC("info-bg"),v.sC("tween"),v.sW(140),v.sH(22),v.sO(0),f.add(v);var g=new app.E("div");g.sX(10),g.sY(3),g.e.style.fontSize="14px",v.add(g);var m=new app.E("div");function w(){var e=r.getInputX()-f.x,t=r.getInputY()-f.y,n=e-u,s=t-p;if(!(13225<n*n+s*s)){var o=Math.atan2(s,n);o+=o<0?2*Math.PI:0;for(var i=0;i<h.length;i++)if(h[i].startAngle<o&&h[i].endAngle>o)return void y(h[i],i)}}function y(e,t){app.showTap();for(var n=0;n<h.length;n++)h[n].target.x=u,h[n].target.y=p;var s=(e.startAngle+e.endAngle)/2,o=10*Math.cos(s),i=10*Math.sin(s);e.target.x=u+o,e.target.y=p+i,v.sX(e.text.x+o+(200<e.text.x?-10:-120)),v.sY(e.text.y+i-30),v.sO(1),g.sT(d.views[t].name),m.sT(app.format(e.sum)),m.e.style.color=d.views[t].tooltipColor}function x(){c=!0,f.e.style.visibility="hidden"}return m.e.style.right="10px",m.sY(3),m.e.style.fontSize="13px",v.add(m),f.onDown(function(){setTimeout(w,20)}),function e(){var t,n;if(requestAnimationFrame(e),!c)for(o.fillStyle=i.bgColor,o.fillRect(0,0,s.width,s.height),t=0;t<h.length;t++)(n=h[t]).color=i.colors[n.id],n.update(),n.render(o)}(),{view:f,moveToSquare:function(e,t,n,s){var o,i,r;if(s)for(o=0;o<h.length;o++)(r=h[o].target).radius=400,r.startAngle-=.4,r.endAngle-=.4;else for(o=0;o<h.length;o++)(i=s?h[o].target:h[o]).x=a,i.y=n.getPercent(o,t)*l*.01,i.startAngle=Math.atan2(l,i.x),i.endAngle=Math.atan2(n.getPercent(o,e)*l*.01,0),i.radius=2e3},moveToCircle:function(e,t,n){if(!c){v.sO(0),e+=1,t+=1;var s,o,i,r,a,l,f=0;for(s=1;s<n.columns.length;s++)if((i=h[s-1]).sum=0,d.views[s-1].isActive){for(r=n.columns[s],o=e;o<=t;o++)i.sum+=r[o];f+=i.sum}for(l=2*Math.PI/f,a=100/f,s=0;s<h.length;s++)(i=h[s]).percent=i.sum*a,i.text.sT(0===i.percent?"":i.percent.toFixed(0)+"%"),i.text.e.style.fontSize=14+i.percent/100*18+"px",i.text.bounds=i.text.e.getBoundingClientRect(),i.target.x=u,i.target.y=p,i.target.startAngle=0===s?0:h[s-1].target.endAngle,i.target.endAngle=i.target.startAngle+i.sum*l,i.target.radius=115}},show:function(){c=!1,f.e.style.visibility="visible",f.sO(1)},hide:function(){f.sO(0),setTimeout(x,400)},setConfig:function(e){i=e,v.e.style.backgroundColor=e.isNight?"#1C2533":"#ffffff",g.e.style.color=e.isNight?"#ffffff":"#000000"}}},app.ScrollBar=function(e,t,n,s){var i,o,r,a,l,f,d,u=app.E,p=20,c=400,h=E,v=1,g=[],m=[],w=!0;function y(e,t){g.length=0,m.length=0,g.push(0),m.push(0);var n,s,o=e.columns[0];for(n=2,s=o.length-1;n<s;n++)t(new Date(o[n]),n)&&(g.push((n-1)/(s-1)*c),m.push(n-1));g.push(c),m.push(s-1)}function x(){w=!0}function C(e,t){w=!1,setTimeout(x,20),d.leftIndex=e,d.rightIndex=t,l.sX(e/v*c-p),f.sX(t/v*c),r.sX(l.x+p),r.sW(f.x-l.x-p+4),l.overlay.sW(Math.max(0,l.x+p)),f.overlay.sW(i.w-f.x),s(e,t)}function b(){return e.getInputX()-i.x}function T(e){for(var t,n=0,s=g.length,o=1,i=Number.MAX_VALUE;n<s;n++)(t=Math.abs(g[n]-e))<i&&(i=t,o=n);return m[o]}function M(){var e=(f.x-(l.x+l.w))/2,t=Math.max(0,Math.min(d.rightIndex,T(b()-e))),n=Math.max(d.leftIndex,Math.min(v,T(b()+e)));t!==d.leftIndex&&n!==d.rightIndex&&C(t,n)}function E(){}return(i=new u("div")).sY(370),i.sW(c),i.sH(50),o=app.Diagram(c,50,t,null,!1,n),i.add(o.view),a=[function(){var e=Math.max(0,T(b()));d.leftIndex!==e&&e<d.rightIndex&&C(e,d.rightIndex)},function(){var e=Math.min(v,T(b()));d.rightIndex!==e&&e>d.leftIndex&&C(d.leftIndex,e)}].map(function(e,t){var n=new u("div");n.sH(i.h),n.sC("tween"),n.sC(0===t?"scroll-overlay-left":"scroll-overlay-right"),i.add(n);var s=new u("div");s.sY(-2),s.sW(p),s.sH(i.h+4),s.sC("side"),s.sC(0===t?"side-left":"side-right"),s.sC("tween"),i.add(s),s.onDown(function(){h=e});var o=new app.E("div");return o.sX(s.w/2-2),o.sY(s.h/2-8),o.sW(3),o.sH(16),o.e.style.backgroundColor="#ffffff",s.add(o),s.overlay=n,s}),(r=new u("div")).sY(-2),r.sH(54),r.sC("frame"),r.sC("tween"),i.add(r),r.onDown(function(){h=M}),l=a[0],(f=a[1]).overlay.e.style.right="0px",d={view:i,leftIndex:0,rightIndex:0,diagram:o,setRange:C,setOver:function(e){v=e.columns[0].length-2,o.setOver(e),y(e,function(e){return 1===e.getUTCDate()})},setDat:function(e){v=e.columns[0].length-2,o.setDat(e),n?y(e,function(e,t){return t%36==1}):e.percentage?y(e,function(e){return!0}):y(e,function(e){return 0===e.getUTCHours()})},setMode:function(t,e){o.setMode(t,e);var n=t?"rgba(48,66,89,0.6)":"rgba(226,238,249,0.6)",s=t?"#56626D":"#C0D1E1";r.e.style.borderColor=s,a.forEach(function(e){e.overlay.e.style.backgroundColor=n,e.e.style.backgroundColor=s,t?e.e.style.border="none":e.e.style.borderLeft=e.e.style.borderRight="2px solid #ffffff"})},renderDiagram:function(){o.render(0,v)}},app.i.moveHandlers.push(function(){w&&h()}),app.i.upHandlers.push(function(){h=E}),d},app.i=function(){var o={x:0,y:0,dx:0,dy:0,isDown:!1,moveHandlers:[],upHandlers:[],downHandlers:[]};function t(e){e.preventDefault&&e.preventDefault(),o.x=e.clientX,o.y=e.clientY,o.isDown=!0;for(var t=0,n=o.downHandlers,s=n.length;t<s;t++)n[t](o)}function n(e){e.preventDefault&&e.preventDefault(),o.isDown=!1;for(var t=0,n=o.upHandlers,s=n.length;t<s;t++)n[t](o)}function s(e){e.preventDefault&&e.preventDefault(),o.x=e.clientX,o.y=e.clientY;for(var t=0,n=o.moveHandlers,s=n.length;t<s;t++)n[t](o)}return document.addEventListener("mousemove",s),document.addEventListener("mousedown",t),document.addEventListener("mouseup",n),document.addEventListener("touchmove",function(e){s(e.touches[0])}),document.addEventListener("touchstart",function(e){t(e.touches[0])}),document.addEventListener("touchend",function(e){e.preventDefault(),n(e)}),o}(),app.E=function(){function n(e){var t=document.createElement(e);t.style.position="absolute",this.x=0,this.y=0,this.w=0,this.h=0,this.o=1,this.e=t}var e=n.prototype;function s(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}return e.constructor=n,e.gX=function(){return this.x},e.sX=function(e){this.x=e,this.e.style.left=e+"px"},e.gY=function(){return this.y},e.sB=function(e){this.e.style.bottom=e+"px"},e.sY=function(e){this.y=e,this.e.style.top=e+"px"},e.gW=function(){return this.w},e.sW=function(e){this.w=e,this.e.style.width=e+"px"},e.gH=function(){return this.h},e.sH=function(e){this.h=e,this.e.style.height=e+"px"},e.sS=function(e,t){this.e.style.transform="scale("+e+", "+t+")"},e.add=function(e){this.e.appendChild(e.e)},e.sC=function(e){n.addClass(this.e,e)},e.rC=function(e){n.removeClass(this.e,e)},e.tC=function(e,t){n.addClass(this.e,e),n.removeClass(this.e,t)},e.sT=function(e){this.e.innerText=e},e.onDown=function(e){this.e.addEventListener("mousedown",e),this.e.addEventListener("touchstart",e)},e.onUp=function(e){this.e.addEventListener("mouseup",e),this.e.addEventListener("touchend",e)},e.sO=function(e){this.o=e,this.e.style.opacity=e},n.removeClass="classList"in document.documentElement?(n.hasClass=function(e,t){return e.classList.contains(t)},n.addClass=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(n.hasClass=function(e,t){return s(t).test(e.className)},n.addClass=function(e,t){n.hasClass(e,t)||(e.className=e.className+" "+t)},function(e,t){e.className=e.className.replace(s(t)," ")}),n}(),window.addEventListener("load",function(){for(var o,i=[],e=["Followers","Interactions","Messages","Views","Apps"],n=!0,t=0;t<5;t++)(o=app.Chart(app.contest[t],t,e[t])).setMode(!1,"#ffffff"),o.onOverMode(),i.push(o);var s=document.getElementById("header"),r=document.getElementById("header-content"),a=new app.E("div");a.sC("main-title"),a.sT("TCharts"),r.appendChild(a.e);var l=new app.E("div");l.sC("mode-text"),l.sC("pointer"),l.sT("Switch to Night Mode"),r.appendChild(l.e),l.onDown(function(){app.showTap(),v()});var f=new app.E("div");f.sC("input-circle"),document.body.appendChild(f.e),app.i.downHandlers.push(function(){f.e.style.transform="scale(1,1)",f.sX(app.i.x-50+app.getScrollX()),f.sY(app.i.y-50+app.getScrollY())}),app.i.moveHandlers.push(function(){f.sX(app.i.x-50+app.getScrollX()),f.sY(app.i.y-50+app.getScrollY())}),app.i.upHandlers.push(function(){f.e.style.transform="scale(0,0)"});var d=new app.E("div");function u(){d.rC("tweeen"),d.sS(0,0),d.sO(1),d.isReady=!0}function p(){d.sC("tweeen"),d.sS(1,1),d.sO(0)}function c(){d.isReady&&(d.isReady=!1,d.sX(app.i.x-120+app.getScrollX()),d.sY(app.i.y-120+app.getScrollY()),setTimeout(p,20),setTimeout(u,400))}function h(){for(var e=Math.min(1.2,window.innerWidth/450),t=window.innerWidth/2-200*e,n=0,s=i.length;n<s;n++)(o=i[n]).view.sX(t),o.view.sY((60+640*n)*e),o.view.sS(e,e),o.view.sc=e;r.style.left=t+"px",r.style.top=8/e+"px",r.style.transform="scale("+e+","+e+")"}function v(){var e=(n=!n)?"#242F3E":"#ffffff";document.body.style.backgroundColor=e,s.style.backgroundColor=e,s.style.borderBottom="2px solid rgba(0,0,0,"+(n?.16:.08)+")",a.e.style.color=n?"#ffffff":"#000000",l.e.style.color=n?"#48AAF0":"#108BE3",l.sT(n?"Switch to Day Mode":"Switch to Night Mode"),f.e.style.backgroundColor=n?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.06)",d.e.style.border="20px solid "+(n?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.12)");for(var t=0;t<5;t++)i[t].setMode(n,e)}d.sC("tap-anim"),d.e.style.transform="scale(0,0)",d.isReady=!0,document.body.appendChild(d.e),u(),app.showTap=function(){setTimeout(c,1)},h(),v(),window.addEventListener("resize",h)}),app.format=function(e){if(0===e)return 0;var t="";return 1e9<e?(e*=1e-9,t="B"):1e6<e?(e*=1e-6,t="M"):1e3<e&&(e*=.001,t="K"),e.toFixed(10<=e?0:1)+t},app.round=function(e,t){for(var n=String(e).length-2,s="1",o=0;o<n;o++)s+="0";return s=Number(s),Math[t](e/s)*s},app.supportPageOffset=void 0!==window.pageXOffset,app.isCSS1Compat="CSS1Compat"===(document.compatMode||""),app.getScrollX=app.supportPageOffset?function(){return window.pageXOffset}:app.isCSS1Compat?function(){return document.documentElement.scrollLeft}:function(){return document.body.scrollLeft},app.getScrollY=app.supportPageOffset?function(){return window.pageYOffset}:app.isCSS1Compat?function(){return document.documentElement.scrollTop}:function(){return document.body.scrollTop};