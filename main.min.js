function Sprite(e){var t=new app.E("div");t.e.style.fontWeight="bold",t.e.style.color="#ffffff",t.e.style.textShadow="1px 1px 5px rgba(0,0,0,0.5)",t.sC("pointer"),t.bounds={width:0,height:0},e.add(t),this.x=0,this.y=0,this.startAngle=0,this.endAngle=0,this.radius=0,this.color="#ffffff",this.sum=0,this.percent=0,this.text=t,this.target={x:0,y:0,startAngle:0,endAngle:0,radius:0}}app.HLines=function(u,n){var d,p,c,h=[],v={},g={},s="#ffffff",o="#ffffff",m=new app.E("div");m.sY(250);var e=new app.E("div");function w(){var e=new app.E("div");e.sW(400),e.sH(2),e.texts=[],m.add(e);for(var t,n=0;n<u.length;n++)t=new app.E("div"),1===n&&(t.e.style.right="0px"),u[n]&&(t.e.style.color=u[n]),t.sY(-16),e.add(t),e.texts.push(t);return i(e,s,o),e}function y(e,t){e.sC("tween"),e.sB(t)}function x(e){e.rC("tween"),h.push(e)}function t(e){for(var t in c=1,p=0,v)h.push(v[t]),v[t].sO(0);v={}}function i(e,t,n){e.e.style.backgroundColor=t,e.e.style.color=n}function r(e){for(var t=0;t<u.length;t++)e.texts[t].sO(n.views[t].isActive?1:0)}return e.sW(400),e.sH(3),e.sY(-1),m.add(e),{setMode:function(e,t){for(var n in s=e?"rgba(255,255,255,0.1)":"rgba(24,45,59,0.1)",o=t.axisText.y||t.axisText,h.forEach(function(e){i(e,s,o)}),g)i(g[n],s,o);for(var n in v)i(v[n],s,o)},addTo:function(e){e.add(m)},setOver:function(e){t()},setDat:function(e){t()},show:function(){m.sO(1)},hide:function(){m.sO(0)},onButtonClick:function(){var e,t;for(e=0;e<h.length;e++)r(h[e]);for(t in v)r(v[t]);for(t in g)r(g[t])},render:function(e,t,n,s,o,i){var r,a,l;for(g=v,v={},r=0,l=s;r<6;l+=i,r++){for((d=g[l])?d.sB((l-s)*o):((d=h.pop())||(d=w(),m.add(d)),d.index=l,d.sO(1),d.sB((l-p)*c),setTimeout(y,20,d,(l-s)*o)),a=0;a<u.length;a++)d.texts[a].sT(app.format(e[a]+n[a]*r));v[d.index]=d}for(var f in g)d=g[f],v[d.index]||(d.sB((d.index-s)*o),d.sO(0),setTimeout(x,500,d));p=s,c=o}}},app.Header=function(e,t,n){var s,o,i,r,a,l,f=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],u=v,d=26784e5,p=[];(s=new app.E("div")).sT(t),s.sC("tween"),s.sC("title"),s.sY(20),e.add(s),(i=new app.E("div")).inputEnabled=!1,i.e.style.position="relative",i.sC("tween"),i.sC("pointer"),i.sY(20),i.sS(1,0),e.add(i),i.onDown(function(){i.inputEnabled&&(app.showTap(),n())}),(l=document.createElement("img")).src="img/zoom-out.png",app.E.addClass(l,"zoom-icon"),i.e.appendChild(l),(o=new app.E("div")).sC("zoom"),o.sT("Zoom Out"),i.add(o);var c=new app.E("div");c.sY(6),c.e.style.right="0px",e.add(c);for(var h=0;h<9;h++)(a=new app.E("div")).sY(20),a.sC("range-text"),a.sC("tw"),a.sS(1,0),c.add(a),p.push(a);function v(e,t){var n=new Date(e),s=new Date(t),o=["","",n.getUTCDate()+"&nbsp;",app.months[n.getUTCMonth()]+"&nbsp;",String(n.getUTCFullYear())];return 1<s.getUTCMonth()-n.getUTCMonth()||s.getTime()-n.getTime()>d?o.push("&nbsp;-&nbsp;",s.getUTCDate()+"&nbsp;",app.months[s.getUTCMonth()]+"&nbsp;",String(s.getUTCFullYear())):o.unshift("","","",""),o}function g(e,t){var n=new Date(e),s=new Date(t),o=[f[n.getUTCDay()]+",&nbsp;",n.getUTCDate()+"&nbsp;",app.months[n.getUTCMonth()]+"&nbsp;",String(n.getUTCFullYear())];return 1<s.getUTCDate()-n.getUTCDate()||864e5<s.getTime()-n.getTime()?o.push("&nbsp;-&nbsp;",f[s.getUTCDay()]+",&nbsp;",s.getUTCDate()+"&nbsp;",app.months[s.getUTCMonth()]+"&nbsp;",String(s.getUTCFullYear())):o.unshift("","","","",""),o}function m(e,t){e.sS(1,1),e.e.innerHTML=t}return{setOver:function(e){r=e,i.inputEnabled=!1,s.sS(1,1),i.sS(1,0),u=v},setDat:function(e){r=e,i.inputEnabled=!0,s.sS(1,0),i.sS(1,1),u=g},setMode:function(e){var t=e?"#ffffff":"#000000";o.e.style.color=e?"#48AAF0":"#108BE3",s.e.style.color=t,p.forEach(function(e){e.e.style.color=t})},setRange:function(e,t){for(var n=u(r.columns[0][e+1],r.columns[0][t+1]).reverse(),s=0;s<n.length;s++)n[s]!==p[s].e.innerHTML&&(p[s].sS(1,0),setTimeout(m,80,p[s],n[s]))}}},app.Info=function(g,m,w,y,x,e,C,t){var n,s,o,T,b,i,M,r,E,A,D,a,l,S=0,f=!1,O=[],I=[],Y=[],u=[],X=[],d=B,H="#000000",L="#ffffff",U=!1,p=["Mon","Tue","Wed","Thu","Fri","Sut","Sun"],c=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for((o=new app.E("div")).sC("tween"),o.sW(m.view.w),o.sH(m.view.h),o.sO(0),o.sY(0),m.view.add(o),(A=new app.E("div")).sW(0),A.sH(m.view.h),A.sC("info-overlay"),m.overlayLayer.add(A),(D=new app.E("div")).sW(0),D.sH(m.view.h),D.e.style.right="0px",D.sC("info-overlay"),m.overlayLayer.add(D),(T=new app.E("div")).sW(2),T.sY(0),T.sH(m.view.h),T.sC("info-line"),T.sC("tw"),o.add(T),(b=new app.E("div")).sC("info-bg"),b.sW(140),b.sH(60),b.onDown(function(e){if(!f)return;e.stopPropagation(),app.showTap(),t(w.leftIndex+S)}),o.add(b),(a=new app.E("div")).sX(6),a.sY(4),b.add(a),s=0;s<5;s++){var h=new app.E("div");h.sC("info-main-text"),h.sC("tw"),a.add(h),u[s]=h}for(r=document.createElement("i"),app.E.addClass(r,"arrow-right"),r.style.right="7px",r.style.top="7px",r.style.position="absolute",b.e.appendChild(r),n=0;n<=e;n++){var v=new app.E("div");b.add(v),v.sC("info-name"),v.sX(C?40:10),O.push(v);var W=new app.E("div");if(W.sC("info-val"),W.e.style.right="8px",b.add(W),I.push(W),C){var k=new app.E("div");k.e.style.right="108px",k.e.style.fontWeight="bold",b.add(k),X.push(k)}}for(m.view.onDown(function(){U||(o.sO(1),m.overlayLayer.sO(1),f=!0,b.e.style.cursor="pointer",R())}),n=0;n<e;n++){var N=new app.E("div");N.sW(8),N.sH(8),N.sX(-6),N.sC("tw"),N.e.style.border="2px solid",N.e.style.borderRadius="6px",Y.push(N),T.add(N)}function B(e){return[p[e.getUTCDay()],",&nbsp;",c[e.getUTCMonth()]+"&nbsp;",e.getUTCDate()+"&nbsp;",String(e.getUTCFullYear())]}function P(e){var t=e.getUTCHours(),n=e.getUTCMinutes();return[t<10?"0":"",String(t),":",n<10?"0":"",String(n)]}function F(e,t){e.sS(1,1),e.e.innerHTML=t}function R(){if(!U){var e,t,n,s,o,i,r,a,l,f,u,d,p,c=g.getInputY()-m.view.y,h=g.getInputX()-m.view.x;if(e=w.rightIndex-w.leftIndex,t=m.view.w/e,!(c<0||c>m.view.h||h<0||h>m.view.w+t)){if(h=(S=Math.min(w.rightIndex-(E&&!C?1:0),Math.floor(h/t)))*t,b.e.style.top=Math.max(-10,Math.min(m.view.h-b.h-10,c-b.h-60))+"px",h<b.w+20?b.sX(h+t+20):b.sX(h-b.w-20),E)A.sW(Math.min(m.view.w-Math.max(3,t),h)),D.sW(Math.max(0,m.view.w-h-Math.max(3,t))),m.overlayLayer.sO(1),T.sX(100500);else for(m.overlayLayer.sO(0),T.sX(h),n=0;n<y.views.length;n++){var v=Y[n];y.views[n].isActive?(v.e.style.backgroundColor=L,v.e.style.borderColor=y.views[n].tooltipColor,v.sY(m.view.h-m.getY(n,w.leftIndex+S)+v.x),v.sO(1)):v.sO(0)}for(o=n=0,i=O.length,r=0;n<i;n++){if(l=I[n],f=O[n],u=X[n],n===y.views.length&&1<o&&!x&&!C)a=app.format(r),d="All",p=H,l.sC("bold");else{if(!y.views[n]||!y.views[n].isActive){u&&u.sS(1,0),f.sS(1,0),l.sS(1,0),f.sT(""),l.sT("");continue}r+=M[n][w.leftIndex+S+1],a=app.format(M[n][w.leftIndex+S+1]),d=y.views[n].name,p=y.views[n].tooltipColor,l.rC("bold")}s=26+20*o,f.sY(s),l.sY(s),f.sS(1,1),l.sS(1,1),f.sT(d),f.e.style.color=H,l.e.style.color=p||H,l.sT(a),u&&(u.sS(1,1),u.sT(m.getPercent(n,w.leftIndex+S).toFixed(0)+"%"),u&&u.sS(1,1),u.sY(s),u.e.style.color=H),o++}b.sH(30+20*o),_(S)}}}function _(e){V(e),_=function(e){clearTimeout(l),l=setTimeout(V,50,e)}}function V(e){var t=d(new Date(i[w.leftIndex+e+1]));for(s=0;s<t.length;s++)u[s].e.style.color=H,t[s]!==u[s].e.innerHTML&&(u[s].sS(1,0),u[s].e.innerHTML=t[s],setTimeout(F,80,u[s],t[s]))}function z(e){i=e.columns[0],M=e.columns.slice(1),setTimeout(R,1)}return app.i.downHandlers.push(function(){if(!U){var e=g.getInputY()-m.view.y;(e<0||e>m.view.h)&&(o.sO(0),m.overlayLayer.sO(0),f=!1,b.e.style.cursor="default")}}),app.i.moveHandlers.push(function(e){e.isDown&&R()}),{setOver:function(e){z(e),E="bar"===e.types.y0,r.style.visibility="visible",d=B},setDat:function(e){z(e),E="bar"===e.types.y0&&!x,r.style.visibility="hidden",d=P},setMode:function(e,t){var n=e?"rgba(36,47,62,0.5)":"rgba(255,255,255,0.5)";A.e.style.backgroundColor=n,D.e.style.backgroundColor=n,b.e.style.backgroundColor=e?"#1C2533":"#ffffff",r.style.borderColor="#D2D5D7",H=e?"#ffffff":"#000000",L=t,T.e.style.backgroundColor=e?"rgba(255,255,255,0.1)":"rgba(24,45,59,0.1)"},render:R,show:function(){U=!1},hide:function(){U=!0,o.sO(0),m.overlayLayer.sO(0)}}},app.Buttons=function(e,n,s,a){var l,f,u="#ffffff";(f=new app.E("div")).sY(435),e.add(f);var t=[];function d(e){e.rC("shake")}function p(e){var t,n,s,o;for(e.isDown=!1,t=0,s=l.length;t<s;t++)(o=l[t]).isActive=o===e,n=o.isActive?1:0,o.tick.sS(n,n),o.e.style.backgroundColor=o.isActive?o.color:u,o.text.e.style.color=o.isActive?"#ffffff":o.color;app.showTap(),a(l)}return s.columns.slice(1).forEach(function(e){t.push(s.names[e[0]])}),l=t.map(function(e,t){var n,s,o,i,r;return(n=new app.E("div")).name=e,n.sC("button"),f.add(n),(s=new app.E("img")).e.src="img/tick.png",s.sC("tween"),s.sC("tick"),n.add(s),(o=new app.E("span")).sC("button-text"),o.sT(e),n.add(o),n.isActive=!0,n.tick=s,n.text=o,n.onDown(function(){n.isDown=!0,r=Date.now(),i=setTimeout(p,200,n)}),app.i.upHandlers.push(function(){if(n.isDown&&!(200<Date.now()-r))if(n.isDown=!1,clearTimeout(i),1===function(){for(var e=0,t=0;t<l.length;t++)e+=l[t].isActive?1:0;return e}()&&n.isActive)!function(e){e.sC("shake"),setTimeout(d,300,e)}(n);else{n.isActive=!n.isActive,n.e.style.backgroundColor=n.isActive?n.color:u,o.e.style.color=n.isActive?"#ffffff":n.color;var e=n.isActive?1:0;s.sS(e,e),app.showTap(),a(l)}}),n}),{setOver:function(e){n?(this.views=[{isActive:!0,name:e.names.y0}],f.sO(0)):this.views=l},setDat:function(e){if(f.sO(1),this.views=l,n)for(var t=0;t<l.length;t++)l[t].name=e.names[e.columns[t+1][0]],l[t].text.sT(l[t].name)},setMode:function(e,n,t){u=t,l.forEach(function(e,t){e.color=n.buttons[s.columns[t+1][0]],e.tooltipColor=n.tooltip[s.columns[t+1][0]],e.e.style.borderColor=e.color,e.e.style.backgroundColor=e.isActive?e.color:u})},views:null}},app.AxisX=function(u){var d,p,c,h,v=[],g={},m={},w="#ffffff";app.months=["Jan","Fab","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var y=new app.E("div");function x(e,t){e.sC("tween"),e.sX(t)}function C(e){e.rC("tween"),v.push(e)}function t(){for(var e in p=1,d=0,g)v.push(g[e]),g[e].sO(0);g={}}return y.sY(250),u.add(y),{setOver:function(e){t(),c=e.columns[0].slice(1),h=c.map(function(e){var t=new Date(e);return t.getUTCDate()+" "+app.months[t.getUTCMonth()]})},setDat:function(e){t(),c=e.columns[0].slice(1),h=c.map(function(e){var t=new Date(e),n=t.getUTCHours(),s=t.getUTCMinutes();return(n<10?"0":"")+n+":"+(s<10?"0":"")+s})},setMode:function(e,t){for(var n in w=t.axisText.x||t.axisText,v.forEach(function(e){e.e.style.color=w}),m)m[n].e.style.color=w;for(var n in g)g[n].e.style.color=w},show:function(){y.sO(1)},hide:function(){y.sO(0)},render:function(e,t,n){for(var s,o=Math.floor((t-e)/5),i=1;i<o;)i*=1.4;i=Math.floor(i);var r,a=e,l=t;for(m=g,g={};a<=l;a+=i)a<0||((s=m[a])?s.sX((c[a]-c[e])*n):((s=v.pop())||(r=void 0,(r=new app.E("div")).sT(0),r.sW(50),r.sY(6),r.e.style.color=w,u.add(r),s=r,y.add(s)),s.index=a,s.sO(1),s.sT(h[a]),s.sX((c[a]-c[d])*p),setTimeout(x,20,s,(c[a]-c[e])*n)),g[s.index]=s);for(var f in m)s=m[f],g[s.index]||(s.sX((c[s.index]-c[e])*n),s.sO(0),setTimeout(C,500,s));d=e,p=n}}},app.Chart=function(e,s,t){var n,o,i,r,a,l,f,u,d,p,c,h,v=app.E,g=app.i,m=e.overview,w=e.data,y=0,x=3===s,C=Math.min(90,m.columns[0].length-2),T=document.body,b={getInputX:function(){return(g.x-n.x)/n.sc},getInputY:function(){return(g.y+app.getScrollY()-n.y)/n.sc}};n=new v("div"),T.appendChild(n.e),n.sW(400),n.sH(640),n.sC("chart"),a=app.Header(n,t,A),r=app.Buttons(n,x,w[0]||m,function(){l.renderDiagram(),E(!0)}),u=new app.HLines(m.y_scaled?[m.colors.y0,m.colors.y1]:[""],r),(o=app.Diagram(400,250,r,u,!0,x)).view.sX(0),o.view.sY(80),n.add(o.view),m.percentage&&((c=app.DiagramP(400,250,r,b)).view.sX(0),c.view.sY(80),n.add(c.view)),i=app.AxisX(o.view),l=app.ScrollBar(b,r,x,function(){a.setRange(l.leftIndex,l.rightIndex),E()}),n.add(l.view);var M=(w[0]||m).columns.length-1;function E(e){o.render(l.leftIndex,l.rightIndex,i,e&&m.y_scaled),c&&h!==m&&c.moveToCircle(l.leftIndex,l.rightIndex,h)}function A(){h=m,a.setOver(m),r.setOver(m),l.setOver(m),o.setOver(m),i.setOver(m),u.setOver(m),f.setOver(m),c&&p&&(c.moveToSquare(y,C,o,!0),c.hide(),o.show(),f.show(),i.show(),u.show()),l.setRange(y,C),l.renderDiagram(),d=p=!0}return f=app.Info(b,o,l,r,x,M,m.percentage,function(e){if(!d)return;d=!1;var t,n=w[e];n||(n=function(e,t){var n=Math.max(1,Math.min(e.columns[0].length-8,t-2)),s={};for(var o in e)s[o]=e[o];s.columns=e.columns.slice();for(var i=0;i<s.columns.length;i++){var r=s.columns[i].slice(n,n+8);r.unshift(s.columns[i][0]),s.columns[i]=r}return s}(m,e));h=n,y=l.leftIndex,C=l.rightIndex,n.percentage&&(o.hide(),f.hide(),i.hide(),u.hide());a.setDat(n),r.setDat(n),l.setDat(n),l.setDat(n),i.setDat(n),u.setDat(n),f.setDat(n),n.percentage?(t=Math.floor((n.columns[0].length-2)/2),l.setRange(t,t+1),c.show(),c.moveToSquare(y,C,o),c.moveToCircle(l.leftIndex,l.rightIndex,n)):(t=24*Math.floor((n.columns[0].length-2)/2/24),o.setDat(n),l.setRange(t,t+24));l.renderDiagram()}),{view:n,onOverMode:A,setMode:function(e,t){var n=app.config[e?"night":"day"][s];o.setMode(e,n),l.setMode(e,n),r.setMode(e,n,t),u.setMode(e,n),i.setMode(e,n),a.setMode(e),f.setMode(e,t),o.bgColor=t,l.diagram.bgColor=t,c&&c.setConfig({bgColor:t,colors:n.lines,isNight:e}),p&&(f.render(),o.render(l.leftIndex,l.rightIndex,i),l.renderDiagram())}}},app.Diagram=function(s,o,f,d,e,t){var p,u,c,n,h,v,a,g,m,w,y,x,C,T,b,M,E,A,D,S,O,I=0,Y=[],X=[],H=-1,i=5,L=Number.MAX_VALUE,l=-Number.MAX_VALUE,U=[],W=[],k=[],N=[],B=[],P=[],F=[],R=[],_=!0,V=!1,r=e?400:0,z=new app.E("div");z.sW(s),z.sH(o);var J=new app.E("div");J.e.style.overflow="hidden",J.sW(s),J.sH(o),z.add(J);var q=new app.E("div");function K(e){Z(e),K=Z;for(var t=0;t<b;t++)x=new app.E("div"),J.add(x),C=document.createElement("canvas"),T=C.getContext("2d",{alpha:1!==b}),C.width=s+2*r,C.height=o,C.style.transform="scale(1, -1)",C.style.height=o+"px",C.style.position="absolute",x.e.appendChild(C),B[t]=C,F[t]=T,P[t]=x;if(!c)for(t=1;t<a;t++)B[t]=B[0],F[t]=F[0],P[t]=P[0]}function Z(e){v=!1,p=(A=e).columns[0].slice(1),e.types,c=e.y_scaled,u=e.columns.slice(1).map(function(e){return e=e.slice(1)}),a=u.length,D=e.percentage?(y=Q,ee):n?(y=G,te):(y=j,ne),b=c?a:1,I=s/(p[p.length-1]-p[0])}function $(){v=!1;for(var e=0;e<b;e++)(C=B[e]).style.width=2*r+s+"px",C.style.height=C.height+"px",C.style.top="0px",C.style.left="0px",app.E.addClass(C,"tween")}return q.sW(z.w),q.sH(z.h),q.sO(0),z.add(q),d&&d.addTo(z),{view:z,bgColor:"#ffffff",overlayLayer:q,setOver:function(e){_=!0,n=e.stacked||t,K(e)},setDat:function(e){_=!1,n=e.stacked,K(e)},setMode:function(e,t){O=t},getY:function(e,t){return(u[e][t]-k[e])*U[e]},getPercent:function(e,t){return u[e][t]*S[t]},render:function(e,t,n,s){if(!V){var o,i,r,a,l,f=Math.ceil(t-e);if(l=e!==H&&t!==h?a=1:e!==H?(a=2,0):(a=0,2),i=Math.max(0,e-Math.floor(f*a)),r=Math.min(p.length-1,t+Math.floor(f*l)),D(e,t,i,r),F[0].fillStyle=this.bgColor,F[0].fillRect(0,0,C.width,C.height),c&&F[1].clearRect(0,0,C.width,C.height),L!==Number.MAX_VALUE){if(n&&n.render(e,t,w),d&&(s?d.onButtonClick():d.render(k,U,W,L,E,M)),!v){for(v=!0,o=0;o<b;o++){C=B[o],x=P[o],C.style.top=(X[o]-N[o])*Y[o]+"px",C.style.height=parseInt(C.style.height)*Y[o]/U[o]+"px",C.style.width=parseInt(C.style.width)*I/w+"px",app.E.removeClass(C,"tween");var u=x.x;x.sX((p[i]-m)*w),C.style.left=u-x.x+(p[i]-p[H])*I+"px",Y[o]=U[o],X[o]=N[o]}setTimeout($,20)}I=w,h=r,m=p[H=i],g=p[r],y(i,r)}}},show:function(){V=!1,z.sO(1)},hide:function(){V=!0,z.sO(0)}};function j(e,t){var n,s,o;for(n=0;n<a;n++)if(f.views[n].isActive){for(o=u[n],(T=F[n]||F[0]).beginPath(),T.moveTo((p[e]-m)*w,(o[e]-k[n])*U[n]),s=e+1;s<=t;s++)T.lineTo((p[s]-m)*w,(o[s]-k[n])*U[n]);T.strokeStyle=O.lines[A.columns[n+1][0]],T.stroke()}}function G(e,t){var n,s,o,i,r,a;for(r=(p[t]-m)*w/(t-e),n=u.length-1;0<=n;n--)if(f.views[n].isActive){for(a=u[n],o=(p[e]-m)*w,T.beginPath(),T.moveTo(o,0),s=e;s<=t;s++,o+=r)i=(R[s]-L)*E,R[s]-=a[s],T.lineTo(o,i),T.lineTo(o+r,i);T.lineTo(o,0),T.closePath(),T.fillStyle=O.lines[A.columns[n+1][0]],T.fill()}}function Q(e,t){var n,s,o,i,r,a,l=[];for(r=(p[t]-m)*w/(t-e),s=e;s<=t;s++)l[s]=100;for(n=u.length-1;0<=n;n--)if(f.views[n].isActive){if(a=u[n],o=(p[e]-m)*w,T.beginPath(),T.moveTo(o,0),_)for(T.lineTo(o,l[e]*E),s=e;s<=t;s++,o+=r)i=l[s]*E,l[s]-=a[s]*S[s],T.lineTo(o,i);else for(s=e;s<=t;s++,o+=r)i=l[s]*E,l[s]-=a[s]*S[s],T.lineTo(o,i),T.lineTo(o+r,i);T.lineTo(o,0),T.closePath(),T.fillStyle=O.lines[A.columns[n+1][0]],T.fill()}}function ee(e,t,n,s){var o,i;for((S=[]).length=0,i=n;i<=s;i++){var r=0;for(o=0;o<a;o++)f.views[o].isActive&&(r+=u[o][i]);S[i]=100/r}L=0,l=100,se(e,t)}function te(e,t,n,s){var o,i;for(R.length=0,l=-Number.MAX_VALUE,i=n;i<=s;i++)R[i]=0;for(o=0;o<a;o++)if(f.views[o].isActive)for(i=n;i<=s;i++)R[i]+=u[o][i];for(i=e;i<=t;i++)l=Math.max(l,R[i]);L=0,se(e,t)}function ne(e,t){var n,s,o;for(L=Number.MAX_VALUE,l=-Number.MAX_VALUE,n=0;n<a;n++)if(f.views[n].isActive){for(o=u[n],k[n]=Number.MAX_VALUE,N[n]=-Number.MAX_VALUE,s=e;s<=t;s++)k[n]=Math.min(k[n],o[s]),N[n]=Math.max(N[n],o[s]);W[n]=Math.max(1,Math.floor((N[n]-k[n])/i)),l=Math.max(N[n],l),L=Math.min(k[n],L)}L=L===l?0:L,se(e,t)}function se(e,t){var n;if(m=p[e],g=p[t],w=s/(g-m),L=app.round(L,"floor"),M=Math.max(1,Math.floor((l-L)/i)),M=app.round(M,"ceil"),E=o/((l=L+M*i)-L),c)for(n=0;n<a;n++)U[n]=E*M/W[n];else for(n=0;n<a;n++)U[n]=E,k[n]=L,N[n]=l,W[n]=M}},Sprite.prototype.update=function(){if(this.x+=.2*(this.target.x-this.x),this.y+=.2*(this.target.y-this.y),this.startAngle+=.2*(this.target.startAngle-this.startAngle),this.endAngle+=.2*(this.target.endAngle-this.endAngle),this.radius+=.2*(this.target.radius-this.radius),0!==this.percent){var e=.5*(this.startAngle+this.endAngle),t=this.radius*(.7-.01*this.percent*.3);this.text.sX(this.x+Math.cos(e)*t-.5*this.text.bounds.width),this.text.sY(this.y+Math.sin(e)*t-.5*this.text.bounds.height)}},Sprite.prototype.render=function(e){e.beginPath(),e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle),e.lineTo(this.x,this.y),e.fillStyle=this.color,e.fill()},app.DiagramP=function(a,l,u,r){var s,o,e,d=.5*a,p=.5*l,c=!0,h=[],i={},f=new app.E("div");f.sC("tween"),f.sW(a),f.sH(l),f.e.style.visibility="hidden";var t=new app.E("div");t.e.style.overflow="hidden",t.sW(a),t.sH(l),f.add(t),s=document.createElement("canvas"),o=s.getContext("2d",{alpha:!1}),s.width=a,s.height=l,s.style.height=l+"px",s.style.position="absolute",t.e.appendChild(s);for(var n=0;n<6;n++)(e=new Sprite(f)).x=d,e.y=p,e.radius=115,e.id="y"+n,h.push(e);var v=new app.E("div");v.sC("info-bg"),v.sC("tween"),v.sW(140),v.sH(22),v.sO(0),f.add(v);var g=new app.E("div");g.sX(10),g.sY(3),g.e.style.fontSize="14px",v.add(g);var m=new app.E("div");function w(){var e=r.getInputX()-f.x,t=r.getInputY()-f.y,n=e-d,s=t-p;if(!(13225<n*n+s*s)){var o=Math.atan2(s,n);o+=o<0?2*Math.PI:0;for(var i=0;i<h.length;i++)if(h[i].startAngle<o&&h[i].endAngle>o)return void y(h[i],i)}}function y(e,t){app.showTap();for(var n=0;n<h.length;n++)h[n].target.x=d,h[n].target.y=p;var s=(e.startAngle+e.endAngle)/2,o=10*Math.cos(s),i=10*Math.sin(s);e.target.x=d+o,e.target.y=p+i,v.sX(e.text.x+o+(200<e.text.x?-10:-120)),v.sY(e.text.y+i-30),v.sO(1),g.sT(u.views[t].name),m.sT(app.format(e.sum)),m.e.style.color=u.views[t].tooltipColor}function x(){c=!0,f.e.style.visibility="hidden"}return m.e.style.right="10px",m.sY(3),m.e.style.fontSize="13px",v.add(m),f.onDown(function(){setTimeout(w,20)}),function e(){var t,n;if(requestAnimationFrame(e),!c)for(o.fillStyle=i.bgColor,o.fillRect(0,0,s.width,s.height),t=0;t<h.length;t++)(n=h[t]).color=i.colors[n.id],n.update(),n.render(o)}(),{view:f,moveToSquare:function(e,t,n,s){var o,i,r;if(s)for(o=0;o<h.length;o++)(r=h[o].target).radius=400,r.startAngle-=.4,r.endAngle-=.4;else for(o=0;o<h.length;o++)(i=s?h[o].target:h[o]).x=a,i.y=n.getPercent(o,t)*l*.01,i.startAngle=Math.atan2(l,i.x),i.endAngle=Math.atan2(n.getPercent(o,e)*l*.01,0),i.radius=2e3},moveToCircle:function(e,t,n){if(!c){v.sO(0),e+=1,t+=1;var s,o,i,r,a,l,f=0;for(s=1;s<n.columns.length;s++)if((i=h[s-1]).sum=0,u.views[s-1].isActive){for(r=n.columns[s],o=e;o<=t;o++)i.sum+=r[o];f+=i.sum}for(l=2*Math.PI/f,a=100/f,s=0;s<h.length;s++)(i=h[s]).percent=i.sum*a,i.text.sT(0===i.percent?"":i.percent.toFixed(0)+"%"),i.text.e.style.fontSize=14+i.percent/100*18+"px",i.text.bounds=i.text.e.getBoundingClientRect(),i.target.x=d,i.target.y=p,i.target.startAngle=0===s?0:h[s-1].target.endAngle,i.target.endAngle=i.target.startAngle+i.sum*l,i.target.radius=115}},show:function(){c=!1,f.e.style.visibility="visible",f.sO(1)},hide:function(){f.sO(0),setTimeout(x,400)},setConfig:function(e){i=e,v.e.style.backgroundColor=e.isNight?"#1C2533":"#ffffff",g.e.style.color=e.isNight?"#ffffff":"#000000"}}},app.ScrollBar=function(e,t,n,s){var i,o,r,a,l,f,u,d,p,c,h=app.E,v=20,g=400,m=O,w=1,y=[],x=[],C=!0;function T(e,t){y.length=0,x.length=0,y.push(0),x.push(0);var n,s,o=e.columns[0];for(n=2,s=o.length-1;n<s;n++)t(new Date(o[n]),n)&&(y.push((n-1)/(s-1)*g),x.push(n-1));y.push(g),x.push(s-1)}function b(){C=!0}function M(e,t){C=!1,setTimeout(b,20),u.leftIndex=e,u.rightIndex=t,l.sX(e/w*g-v),f.sX(t/w*g),r.sX(l.x+v),r.sW(f.x-l.x-v+4),l.overlay.sW(Math.max(0,l.x+v)),f.overlay.sW(i.w-f.x),s(e,t)}function E(){return e.getInputX()-i.x}function A(e){for(var t,n=0,s=y.length,o=1,i=Number.MAX_VALUE;n<s;n++)(t=Math.abs(y[n]-e))<i&&(i=t,o=n);return x[o]}function D(e,t){p===e&&c===t||(p=e,c=t,clearTimeout(d),d=setTimeout(M,30,e,t))}function S(){var e=u.rightIndex-u.leftIndex,t=(f.x-(l.x+l.w))/2,n=Math.max(0,Math.min(w-e,A(E()-t))),s=n+e;n!==u.leftIndex&&s!==u.rightIndex&&D(n,s)}function O(){}return(i=new h("div")).sY(370),i.sW(g),i.sH(50),o=app.Diagram(g,50,t,null,!1,n),i.add(o.view),a=[function(){var e=Math.max(0,A(E()));u.leftIndex!==e&&e<u.rightIndex&&D(e,u.rightIndex)},function(){var e=Math.min(w,A(E()));u.rightIndex!==e&&e>u.leftIndex&&D(u.leftIndex,e)}].map(function(e,t){var n=new h("div");n.sH(i.h),n.sC("tween"),n.sC(0===t?"scroll-overlay-left":"scroll-overlay-right"),i.add(n);var s=new h("div");s.sY(-2),s.sW(v),s.sH(i.h+4),s.sC("side"),s.sC(0===t?"side-left":"side-right"),s.sC("tween"),i.add(s),s.onDown(function(){m=e});var o=new app.E("div");return o.sX(s.w/2-2),o.sY(s.h/2-8),o.sW(3),o.sH(16),o.e.style.backgroundColor="#ffffff",s.add(o),s.overlay=n,s}),(r=new h("div")).sY(-2),r.sH(54),r.sC("frame"),r.sC("tween"),i.add(r),r.onDown(function(){m=S}),l=a[0],(f=a[1]).overlay.e.style.right="0px",u={view:i,leftIndex:0,rightIndex:0,diagram:o,setRange:M,setOver:function(e){w=e.columns[0].length-2,o.setOver(e),T(e,function(e){return 1===e.getUTCDate()})},setDat:function(e){w=e.columns[0].length-2,o.setDat(e),n?T(e,function(e,t){return t%36==1}):e.percentage?T(e,function(e){return!0}):T(e,function(e){return 0===e.getUTCHours()})},setMode:function(t,e){o.setMode(t,e);var n=t?"rgba(48,66,89,0.6)":"rgba(226,238,249,0.6)",s=t?"#56626D":"#C0D1E1";r.e.style.borderColor=s,a.forEach(function(e){e.overlay.e.style.backgroundColor=n,e.e.style.backgroundColor=s,t?e.e.style.border="none":e.e.style.borderLeft=e.e.style.borderRight="2px solid #ffffff"})},renderDiagram:function(){o.render(0,w)}},app.i.moveHandlers.push(function(){C&&m()}),app.i.upHandlers.push(function(){m=O}),u},app.i=function(){var o={x:0,y:0,dx:0,dy:0,isDown:!1,moveHandlers:[],upHandlers:[],downHandlers:[]};function t(e){e.preventDefault&&e.preventDefault(),o.x=e.clientX,o.y=e.clientY,o.isDown=!0;for(var t=0,n=o.downHandlers,s=n.length;t<s;t++)n[t](o)}function n(e){e.preventDefault&&e.preventDefault(),o.isDown=!1;for(var t=0,n=o.upHandlers,s=n.length;t<s;t++)n[t](o)}function s(e){e.preventDefault&&e.preventDefault(),o.x=e.clientX,o.y=e.clientY;for(var t=0,n=o.moveHandlers,s=n.length;t<s;t++)n[t](o)}return document.addEventListener("mousemove",s),document.addEventListener("mousedown",t),document.addEventListener("mouseup",n),document.addEventListener("touchmove",function(e){s(e.touches[0])}),document.addEventListener("touchstart",function(e){t(e.touches[0])}),document.addEventListener("touchend",function(e){e.preventDefault(),n(e)}),o}(),app.E=function(){function n(e){var t=document.createElement(e);t.style.position="absolute",this.x=0,this.y=0,this.w=0,this.h=0,this.o=1,this.e=t}var e=n.prototype;function s(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}return e.constructor=n,e.gX=function(){return this.x},e.sX=function(e){this.x=e,this.e.style.left=e+"px"},e.gY=function(){return this.y},e.sB=function(e){this.e.style.bottom=e+"px"},e.sY=function(e){this.y=e,this.e.style.top=e+"px"},e.gW=function(){return this.w},e.sW=function(e){this.w=e,this.e.style.width=e+"px"},e.gH=function(){return this.h},e.sH=function(e){this.h=e,this.e.style.height=e+"px"},e.sS=function(e,t){this.e.style.transform="scale("+e+", "+t+")"},e.add=function(e){this.e.appendChild(e.e)},e.sC=function(e){n.addClass(this.e,e)},e.rC=function(e){n.removeClass(this.e,e)},e.tC=function(e,t){n.addClass(this.e,e),n.removeClass(this.e,t)},e.sT=function(e){this.e.innerText=e},e.onDown=function(e){this.e.addEventListener("mousedown",e),this.e.addEventListener("touchstart",e)},e.onUp=function(e){this.e.addEventListener("mouseup",e),this.e.addEventListener("touchend",e)},e.sO=function(e){this.o=e,this.e.style.opacity=e},n.removeClass="classList"in document.documentElement?(n.hasClass=function(e,t){return e.classList.contains(t)},n.addClass=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(n.hasClass=function(e,t){return s(t).test(e.className)},n.addClass=function(e,t){n.hasClass(e,t)||(e.className=e.className+" "+t)},function(e,t){e.className=e.className.replace(s(t)," ")}),n}(),window.addEventListener("load",function(){for(var o,i=[],e=["Followers","Interactions","Messages","Views","Apps"],n=!0,t=0;t<5;t++)(o=app.Chart(app.contest[t],t,e[t])).setMode(!1,"#ffffff"),o.onOverMode(),i.push(o);var s=document.getElementById("header"),r=document.getElementById("header-content"),a=new app.E("div");a.sC("main-title"),a.sT("TCharts"),r.appendChild(a.e);var l=new app.E("div");l.sC("mode-text"),l.sC("pointer"),l.sT("Switch to Night Mode"),r.appendChild(l.e),l.onDown(function(){app.showTap(),v()});var f=new app.E("div");f.sC("input-circle"),document.body.appendChild(f.e),app.i.downHandlers.push(function(){f.e.style.transform="scale(1,1)",f.sX(app.i.x-50+app.getScrollX()),f.sY(app.i.y-50+app.getScrollY())}),app.i.moveHandlers.push(function(){f.sX(app.i.x-50+app.getScrollX()),f.sY(app.i.y-50+app.getScrollY())}),app.i.upHandlers.push(function(){f.e.style.transform="scale(0,0)"});var u=new app.E("div");function d(){u.rC("tweeen"),u.sS(0,0),u.sO(1),u.isReady=!0}function p(){u.sC("tweeen"),u.sS(1,1),u.sO(0)}function c(){u.isReady&&(u.isReady=!1,u.sX(app.i.x-120+app.getScrollX()),u.sY(app.i.y-120+app.getScrollY()),setTimeout(p,20),setTimeout(d,400))}function h(){for(var e=Math.min(1.2,window.innerWidth/450),t=window.innerWidth/2-200*e,n=0,s=i.length;n<s;n++)(o=i[n]).view.sX(t),o.view.sY((60+640*n)*e),o.view.sS(e,e),o.view.sc=e;r.style.left=t+"px",r.style.top=8/e+"px",r.style.transform="scale("+e+","+e+")"}function v(){var e=(n=!n)?"#242F3E":"#ffffff";document.body.style.backgroundColor=e,s.style.backgroundColor=e,s.style.borderBottom="2px solid rgba(0,0,0,"+(n?.16:.08)+")",a.e.style.color=n?"#ffffff":"#000000",l.e.style.color=n?"#48AAF0":"#108BE3",l.sT(n?"Switch to Day Mode":"Switch to Night Mode"),f.e.style.backgroundColor=n?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.06)",u.e.style.border="20px solid "+(n?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.12)");for(var t=0;t<5;t++)i[t].setMode(n,e)}u.sC("tap-anim"),u.e.style.transform="scale(0,0)",u.isReady=!0,document.body.appendChild(u.e),d(),app.showTap=function(){setTimeout(c,1)},h(),v(),window.addEventListener("resize",h)}),app.format=function(e){if(0===e)return 0;var t="";return 1e9<e?(e*=1e-9,t="B"):1e6<e?(e*=1e-6,t="M"):1e3<e&&(e*=.001,t="K"),e.toFixed(10<=e?0:1)+t},app.round=function(e,t){for(var n=String(e).length-2,s="1",o=0;o<n;o++)s+="0";return s=Number(s),Math[t](e/s)*s},app.supportPageOffset=void 0!==window.pageXOffset,app.isCSS1Compat="CSS1Compat"===(document.compatMode||""),app.getScrollX=app.supportPageOffset?function(){return window.pageXOffset}:app.isCSS1Compat?function(){return document.documentElement.scrollLeft}:function(){return document.body.scrollLeft},app.getScrollY=app.supportPageOffset?function(){return window.pageYOffset}:app.isCSS1Compat?function(){return document.documentElement.scrollTop}:function(){return document.body.scrollTop};